(this["webpackJsonprewards-store-2"]=this["webpackJsonprewards-store-2"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var c=s(0),a=s(1),n=s.n(a),i=s(11),r=s.n(i),o=(s(17),s(18),s(19),s(2)),l=s(4),d=s.n(l),j=s(6),u=s(3),b=Object(a.createContext)();function m(e){var t=new Headers;t.append("Content-Type","application/json"),t.append("Accept","application/json"),t.append("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmU0MjIyMzI2ZjdkMjAwMjA0MTE0ZDMiLCJpYXQiOjE2MDg3ODY0Njd9.y-gmTy9zJvIdR9OecwmPGOtBXagHyD9sSNiYK0_lNe4"),t.append("Cookie","__cfduid=d1c80f21dcaa095448f1cb80cfb82fb1a1607248835");var s={method:"GET",headers:t,redirect:"follow"},n={method:"GET",headers:t,redirect:"follow"},i=Object(a.useState)({user:{id:"0",name:"Loading...",points:0,redeemHistory:{},createDate:"new Date(1510171520852)"}}),r=Object(u.a)(i,2),l=r[0],m=r[1],O=Object(a.useState)({}),h=Object(u.a)(O,2),f=h[0],p=h[1],x=Object(a.useState)({filtering:1,displayOffset:0,amountToDisplay:10,amountOfProducts:0,viewingHistory:!1,modal:{class:"",title:"",msg:""}}),g=Object(u.a)(x,2),v=g[0],y=g[1],N=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/user/me",s).then((function(e){return e.text()})).then((function(e){return t=JSON.parse(e)})).catch((function(e){return console.log("error",e)}));case 2:m({user:t});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",n).then((function(e){return e.text()})).then((function(e){return p(JSON.parse(e))})).catch((function(e){return console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(s){var c,a,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({productId:s}),n={method:"POST",headers:t,body:a,redirect:"follow"},e.next=4,fetch("https://coding-challenge-api.aerolab.co/redeem",n).then((function(e){return e.text()})).then((function(e){c=e})).catch((function(e){c=e}));case 4:N(),i=JSON.stringify(c).includes("successfully")?"SUCCESS":c.replace("{"," ").replace("}"," ").toUpperCase(),S({class:"is-active",title:i,msg:"Operation: Redeeming a product"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(s){var c,a,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.user.points+s>1e4)){e.next=4;break}c="Error: Too many points. Spend some first",e.next=9;break;case 4:return a=JSON.stringify({amount:s}),n={method:"POST",headers:t,body:a,redirect:"follow"},e.next=8,fetch("https://coding-challenge-api.aerolab.co/user/points",n).then((function(e){return e.text()})).then((function(e){return c=e})).catch((function(e){c=e}));case 8:N();case 9:i=JSON.stringify(c).includes("Updated")?"SUCCESS":c.replace("{"," ").replace("}"," ").toUpperCase(),S({class:"is-active",title:i,msg:"Operation: Redeeming points"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){y(Object(o.a)(Object(o.a)({},v),{},{modal:{class:e.class,title:e.title,msg:e.msg}}))};return Object(a.useEffect)((function(){N(),C()}),[]),Object(c.jsx)(b.Provider,{value:{userData:l,setUserData:m,products:f,settings:v,setSettings:y,fetchUser:N,fetchProducts:C,fetchMorePoints:k,redeemProduct:w,closeModal:function(e){y(Object(o.a)(Object(o.a)({},v),{},{modal:{class:"",title:"",msg:""}}))}},children:e.children})}var O=s(9);var h=function(e){return Object(c.jsxs)("div",{className:"modal my-modal ".concat(e.modal),children:[Object(c.jsx)("div",{className:"modal-background",onClick:e.handleModal}),Object(c.jsx)("div",{className:"modal-card",children:Object(c.jsxs)("section",{className:"modal-card-body my-modal-body",children:[Object(c.jsx)("h2",{className:"title mb-5",children:"Select the amount of your voucher:"}),Object(c.jsxs)("div",{className:"buttons",children:[Object(c.jsx)("button",{onClick:function(){e.fetchMorePoints(7500),e.handleModal()},className:"button my-button",children:"7500"}),Object(c.jsx)("button",{onClick:function(){e.fetchMorePoints(5e3),e.handleModal()},className:"button my-button",children:"5000"}),Object(c.jsx)("button",{onClick:function(){e.fetchMorePoints(1e3),e.handleModal()},className:"button my-button",children:"1000"})]}),Object(c.jsx)("button",{className:"button is-danger my-cancel-button",onClick:e.handleModal,children:"Cancel"})]})})]})},f=s.p+"static/media/aerolab-logo.0a8fb170.svg",p=s.p+"static/media/coin.b8bc711d.svg";s(21);var x=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),s=t[0],n=t[1],i=Object(a.useState)(""),r=Object(u.a)(i,2),l=r[0],d=r[1],j=Object(a.useContext)(b),m=j.userData,x=j.fetchMorePoints,g=j.settings,v=j.setSettings,y=function(){""===l?(d("is-active"),O.a.on()):(d(""),O.a.off())};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation",children:[Object(c.jsxs)("div",{className:"navbar-brand",children:[Object(c.jsx)("a",{className:"navbar-item",href:"https://aerolab.co/",children:Object(c.jsx)("img",{src:f,width:"32",height:"36"})}),Object(c.jsxs)("a",{role:"button",className:"navbar-burger ".concat(s),"aria-label":"menu","aria-expanded":"false",onClick:function(){n(""===s?"is-active":"")},"data-target":"navbarBasicExample",children:[Object(c.jsx)("span",{"aria-hidden":"true"}),Object(c.jsx)("span",{"aria-hidden":"true"}),Object(c.jsx)("span",{"aria-hidden":"true"})]})]}),Object(c.jsx)("div",{className:"navbar-end",children:Object(c.jsxs)("div",{className:"navbar-menu ".concat(s),children:[Object(c.jsx)("div",{className:"navbar-start",children:Object(c.jsxs)("div",{className:"user-data navbar-item",children:[Object(c.jsx)("p",{children:m.user.name}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:m.user.points})," ",Object(c.jsx)("img",{src:p,alt:"Coins"})]})]})}),Object(c.jsx)("div",{className:"navbar-item",children:Object(c.jsxs)("div",{className:"buttons",children:[Object(c.jsx)("a",{className:"button my-button",onClick:function(){return g.viewingHistory?v(Object(o.a)(Object(o.a)({},g),{},{viewingHistory:!1,displayOffset:0})):v(Object(o.a)(Object(o.a)({},g),{},{viewingHistory:!0,displayOffset:0}))},children:g.viewingHistory?"View Products":"View History"}),Object(c.jsx)("a",{className:"button is-primary",onClick:y,children:Object(c.jsx)("strong",{children:"REDEEM POINTS"})})]})})]})})]}),Object(c.jsx)(h,{modal:l,handleModal:y,fetchMorePoints:x})]})},g=(s(22),s.p+"static/media/header-x1.b6f067c6.png");var v=function(e){return Object(c.jsxs)("div",{className:"modal ".concat(e.class),children:[Object(c.jsx)("div",{className:"modal-background",onClick:e.close}),Object(c.jsx)("div",{className:"modal-card",children:Object(c.jsxs)("section",{className:"modal-card-body my-modal-body",style:{backgroundColor:"SUCCESS"===e.title?"#1ddb29":"#db241a"},children:[Object(c.jsx)("h2",{className:"has-text-white",children:e.title}),Object(c.jsx)("p",{className:"has-text-white mb-4",children:e.msg}),Object(c.jsx)("button",{className:"button is-secondary",onClick:e.close,children:"OK"})]})})]})};var y=function(){var e=Object(a.useContext)(b),t=e.settings,s=e.closeModal;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{className:"header",children:[Object(c.jsx)("img",{src:g,alt:"Header",className:"header-bg"}),Object(c.jsx)("h1",{className:"header-heading",children:"Rewards Store"})]}),Object(c.jsx)(v,{title:t.modal.title,msg:t.modal.msg,class:t.modal.class,close:s})]})},N=s.p+"static/media/arrow-left.e6eb9be1.svg",C=s.p+"static/media/arrow-right.3306c112.svg";s(23);var w=function(){var e=Object(a.useContext)(b),t=e.settings,s=e.setSettings,n=e.products,i=function(e){s(Object(o.a)(Object(o.a)({},t),{},{filtering:e,displayOffset:0}))};return Object(c.jsxs)("div",{className:"my-filters",children:[Object(c.jsxs)("div",{className:"buttons",children:[Object(c.jsx)("b",{children:"Filter by:"}),Object(c.jsx)("a",{onClick:function(){return i(1)},className:"button ".concat(1===t.filtering?"orange":""),children:"Most recent"}),Object(c.jsx)("a",{onClick:function(){return i(2)},className:"button ".concat(2===t.filtering?"orange":""),children:"Lowest price"}),Object(c.jsx)("a",{onClick:function(){return i(3)},className:"button ".concat(3===t.filtering?"orange":""),children:"Highest price"})]}),Object(c.jsxs)("div",{className:"pag-buttons",children:[t.displayOffset+t.amountToDisplay<n.length?Object(c.jsxs)("p",{className:"has-text-black",children:[t.displayOffset+t.amountToDisplay," of"," ",n.length]}):Object(c.jsxs)("p",{className:"has-text-black",children:[n.length," of ",n.length]}),Object(c.jsx)("img",{src:N,onClick:function(){if(t.displayOffset>=t.amountToDisplay){var e=t.displayOffset-t.amountToDisplay;s(Object(o.a)(Object(o.a)({},t),{},{displayOffset:e}))}},alt:"Left arrow"}),Object(c.jsx)("img",{src:C,onClick:function(){if(Object.values(n).length/t.displayOffset===1/0)s(Object(o.a)(Object(o.a)({},t),{},{displayOffset:t.amountToDisplay}));else if(Object.values(n).length-t.amountToDisplay>t.displayOffset){var e=t.displayOffset+t.amountToDisplay;s(Object(o.a)(Object(o.a)({},t),{},{displayOffset:e}))}},alt:"Right arrow"})]})]})},k=s(10),S=s.p+"static/media/buy-blue.c5c4f01c.svg";var M=function(e){return Object(c.jsx)("div",{className:"product-hover ".concat(e.cost>e.userpoints?"doesnt-afford":"does-afford"),children:e.cost>e.userpoints?Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:["You're missing ",e.cost-e.userpoints]}),Object(c.jsx)("img",{src:p,alt:"Coins"})]}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:["REDEEM FOR ",e.cost]}),Object(c.jsx)("img",{src:p,alt:"Coins"})]})})};var D=function(e){var t=Object(a.useContext)(b),s=t.userData,n=t.redeemProduct,i=Object(a.useState)(!1),r=Object(u.a)(i,2),o=r[0],l=r[1];return Object(c.jsxs)("div",{onClick:function(){e.cost<=s.user.points&&n(e.id)},onMouseOver:function(){l(!0)},onMouseLeave:function(){l(!1)},className:"card m-3 my-product",children:[o?Object(c.jsx)(M,{cost:e.cost,userpoints:s.user.points}):"",Object(c.jsx)("div",{className:"top-right",children:e.cost>s.user.points?Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:["You're missing ",e.cost-s.user.points]}),Object(c.jsx)("img",{src:p,alt:"Coin"})]}):Object(c.jsx)("img",{src:S,alt:"Buy"})}),Object(c.jsx)("div",{className:"card-image",children:Object(c.jsx)("figure",{className:"image is-16by9 is-fullwidth",children:Object(c.jsx)("img",{src:e.img,alt:e.name})})}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("p",{className:"has-text-primary m-0 p-0",children:e.category}),Object(c.jsx)("h4",{className:"is-size-5 m-0",children:e.name}),e.cost>s.user.points?"":Object(c.jsxs)("i",{className:"is-size-5 m-0 is-primary mobile-text",children:["Touch to redeem for ",e.cost," ",Object(c.jsx)("img",{src:p,alt:"Coin"})]})]})]})};s(24);var T=function(){var e=Object(a.useContext)(b),t=e.products,s=e.settings,n=function(e){switch(s.filtering){case 1:return e;case 2:return Object(k.a)(e).sort((function(e,t){return e.cost<t.cost?-1:e.cost>t.cost?1:0}));case 3:return Object(k.a)(e).sort((function(e,t){return e.cost<t.cost?1:e.cost>t.cost?-1:0}));default:return e}}(Object.values(t)).map((function(e){return Object(c.jsx)(D,{img:e.img.url,name:e.name,category:e.category,id:e._id,cost:e.cost},e._id)}));return Object(c.jsx)("div",{className:"container my-product-container",children:n.slice(s.displayOffset,s.displayOffset+s.amountToDisplay)})};var E=function(e){return Object(c.jsxs)("div",{className:"card m-3 my-product",children:[Object(c.jsx)("div",{className:"top-right",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:e.cost}),Object(c.jsx)("img",{src:p,alt:"Coin"})]})}),Object(c.jsx)("div",{className:"card-image",children:Object(c.jsx)("figure",{className:"image is-4by3",children:Object(c.jsx)("img",{src:e.img,alt:e.name})})}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("p",{className:"has-text-primary m-0 p-0",children:e.category}),Object(c.jsx)("h4",{className:"is-size-5 m-0",children:e.name})]})]})};var P=function(){var e=Object(a.useContext)(b),t=e.userData,s=(e.settings,Object.values(t.user.redeemHistory).reverse().map((function(e){return Object(c.jsx)(E,{img:e.img.url,name:e.name,category:e.category,id:e._id,cost:e.cost},e._id)})));return Object(c.jsxs)("div",{className:"history",children:[Object(c.jsx)("h1",{children:"History"}),Object(c.jsx)("div",{className:"container my-product-container",children:s})]})};var H=function(){var e=Object(a.useContext)(b).settings;return Object(c.jsx)("main",{children:e.viewingHistory?Object(c.jsx)(P,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{})," ",Object(c.jsx)(T,{})]})})};var J=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(m,{children:[Object(c.jsx)(x,{}),Object(c.jsx)(y,{}),Object(c.jsx)(H,{})]})})};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(J,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.6b9f3436.chunk.js.map